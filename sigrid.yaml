# All subdirectories within those directories will be used as components
# See: https://docs.sigrid-says.com/reference/analysis-scope-configuration.html
component_base_dirs:
  - "backend"
  - "backend/src"
  - "backend/src/api"
  - "backend/src/bin"
  - "backend/src/infra"
  - "backend/src/repository"

components:
  # Frontend src/components
  - { include: [ ".*/frontend/src/components/committee_session/.*" ], name: "(Frontend) Components/committee_session" }
  - { include: [ ".*/frontend/src/components/data_entry/.*" ], name: "(Frontend) Components/data_entry" }
  - { include: [ ".*/frontend/src/components/election/.*" ], name: "(Frontend) Components/election" }
  - { include: [ ".*/frontend/src/components/error/.*" ], name: "(Frontend) Components/error" }
  - { include: [ ".*/frontend/src/components/footer/.*" ], name: "(Frontend) Components/footer" }
  - { include: [ ".*/frontend/src/components/generated/.*" ], name: "(Frontend) components/generated" }
  - { include: [ ".*/frontend/src/components/layout/.*" ], name: "(Frontend) components/layout" }
  - { include: [ ".*/frontend/src/components/messages/.*" ], name: "(Frontend) components/messages" }
  - { include: [ ".*/frontend/src/components/navbar/.*" ], name: "(Frontend) Components/navbar" }
  - { include: [ ".*/frontend/src/components/page_title/.*" ], name: "(Frontend) components/page_title" }
  - { include: [ ".*/frontend/src/components/polling_station/.*" ], name: "(Frontend) components/polling_station" }
  - { include: [ ".*/frontend/src/components/privacy_statement/.*" ], name: "(Frontend) components/privacy_statement" }
  - { include: [ ".*/frontend/src/components/ui/.*" ], name: "(Frontend) Lib/UI" }

  # Frontend src/features
  - { include: [ ".*/frontend/src/features/account/.*" ], name: "(Frontend) Modules/account" }
  - { include: [ ".*/frontend/src/features/data_entry/.*" ], name: "(Frontend) Modules/data_entry" }
  - { include: [ ".*/frontend/src/features/data_entry_detail/.*" ], name: "(Frontend) features/data_entry_detail" }
  - { include: [ ".*/frontend/src/features/data_entry_home/.*" ], name: "(Frontend) Modules/data_entry_home" }
  - { include: [ ".*/frontend/src/features/dev/.*" ], name: "(Frontend) features/dev" }
  - { include: [ ".*/frontend/src/features/election_create/.*" ], name: "(Frontend) Modules/election_create" }
  - { include: [ ".*/frontend/src/features/election_management/.*" ], name: "(Frontend) Modules/election_management" }
  - { include: [ ".*/frontend/src/features/election_overview/.*" ], name: "(Frontend) Modules/election_overview" }
  - { include: [ ".*/frontend/src/features/election_status/.*" ], name: "(Frontend) Modules/election_status" }
  - { include: [ ".*/frontend/src/features/investigations/.*" ], name: "(Frontend) features/investigations" }
  - { include: [ ".*/frontend/src/features/logs/.*" ], name: "(Frontend) Modules/logs" }
  - { include: [ ".*/frontend/src/features/polling_stations/.*" ], name: "(Frontend) Modules/polling_stations" }
  - { include: [ ".*/frontend/src/features/resolve_differences/.*" ], name: "(Frontend) Modules/resolve_differences" }
  - { include: [ ".*/frontend/src/features/resolve_errors/.*" ], name: "(Frontend) Modules/resolve_errors" }
  - { include: [ ".*/frontend/src/features/users/.*" ], name: "(Frontend) Modules/users" }

  # Frontend src level
  - { include: [ ".*/frontend/src/api/.*" ], name: "(Frontend) Lib/API" }
  - { include: [ ".*/frontend/src/app/.*" ], name: "(Frontend) App" }
  - { include: [ ".*/frontend/src/hooks/.*" ], name: "(Frontend) Hooks" }
  - { include: [ ".*/frontend/src/i18n/.*" ], name: "(Frontend) Lib/i18n" }
  - { include: [ ".*/frontend/src/styles/.*" ], name: "(Frontend) src/styles" }
  - { include: [ ".*/frontend/src/testing/.*" ], name: "(Frontend) src/testing" }
  - { include: [ ".*/frontend/src/types/.*" ], name: "(Frontend) src/types" }
  - { include: [ ".*/frontend/src/utils/.*" ], name: "(Frontend) Lib/Util" }

  # Frontend root level
  - { include: [ ".*/frontend/e2e-tests/.*" ], name: "(Frontend) e2e tests" }

languages:
  - name: "css"
  - name: "javascript"
  - name: "sqlite"
    production:
      include:
        - ".*/migrations/.*[.]sql"
      exclude:
        - ".*/fixtures/.*[.]sql"
    test:
    generated:

  - name: "rust"
    production:
      include:
        - ".*/gen-openapi[.]rs"
        - ".*/api[.]rs"
    test:
      include:
        - ".*/gen-test-election[.]rs"
        - ".*/test_data_gen/.*[.]rs"
        - ".*/typst_tests[.]rs"
        - ".*/backend/fuzz/.*"
    generated:
      include:
        - ".*/gen/.*[.]rs"
        - ".*/.sqlx/.*[.]json"

  - name: "typescript"
    production:
    test:
      include:
        - ".*/[.]storybook/.*"
        - ".*[.]e2e[.]ts"
        - ".*.stories[.]tsx"
        - ".*/src/components/error/NotAvailableInMock[.]tsx"
        - ".*/src/features/dev/.*"
        - ".*/testing/.*"
        - ".*/e2e-tests/.*"
    generated:
      include:
        - ".*/generated/.*[.]ts"

exclude:
  - ".*/backend/[.]env"
  - ".*/backend/[.]sqlx/.*"
  - ".*/documentatie/.*"
  - ".*/frontend/scripts/.*"
  - ".*/frontend/.*[.]d[.]ts"
  - ".*/frontend/.*[.]config[.]ts"
  - ".*/frontend/package.json"
  - ".*/frontend/tsconfig[.]ts"
  - "docker-compose.yml"

dependencychecker:
  blocklist:
    - "backend"
  transitive: true

architecture:
  enabled: true
  custom_components: true

thirdpartyfindings:
  enabled: true
